buildscript {
    repositories {
        mavenLocal()
        jcenter()
        maven {
            url "https://oss.sonatype.org/content/repositories/snapshots/"
        }
    }
    dependencies {
        classpath 'com.android.tools.build:gradle:0.12.0'
        classpath 'me.champeau.gradle:gradle-groovy-android-plugin:0.3.0'
    }
}

apply plugin: 'android-library'
apply plugin: 'maven'

version = '0.1-SNAPSHOT'
group = 'fr.grousset.fastsnail'


android {

    //publishNonDefault true

    compileSdkVersion 19
    buildToolsVersion '19.1.0'

    lintOptions {
        abortOnError false
    }

}

apply plugin: 'me.champeau.gradle.groovy-android'

repositories {
    mavenLocal()
    jcenter()
}

configurations {
    deployerJars
}

dependencies {
    compile fileTree(dir: 'libs', include: ['*.jar'])
    compile 'com.android.support:appcompat-v7:20.0.0'
    provided 'org.codehaus.groovy:groovy:2.4.0-beta-3:grooid'
    provided('org.codehaus.groovy:groovy-json:2.4.0-beta-3') {
        transitive = false
    }
    compile 'com.netflix.rxjava:rxjava-android:0.18.+'
    compile 'com.netflix.rxjava:rxjava-async-util:0.20.3'
    compile 'com.squareup.retrofit:retrofit:1.6.1'
    compile 'com.squareup.okhttp:okhttp-urlconnection:2.0.0'
    compile 'com.squareup.okhttp:okhttp:2.0.0'

    deployerJars 'org.apache.maven.wagon:wagon-ssh:1.0-alpha-3'
}

uploadArchives {
    repositories {
        mavenDeployer {
            name = 'sshDeployer' // optional
            configuration = configurations.deployerJars
            repository(url: groussetRepoUrl) {
                authentication(userName: groussetRepoUsername, password: groussetRepoPassword)
            }
            snapshotRepository(url: groussetSnapshotsRepoUrl) {
                authentication(userName: groussetRepoUsername, password: groussetRepoPassword)
            }

            pom.project {
                name 'fastsnail Android Groovy Library'
                artifactId 'fastsnail'
                packaging 'aar'
            }

        }
    }

}
